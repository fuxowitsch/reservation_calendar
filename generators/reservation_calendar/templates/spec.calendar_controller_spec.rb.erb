require 'spec_helper'

describe <%= view_name.classify%>Controller do
	integrate_views
  
  it "should use <%= view_name.classify%>Controller" do
    controller.should be_an_instance_of(<%= view_name.classify%>Controller)
  end
  
  describe "GET /calendar" do
    it "should assign parameters for month and year to instance variables" do
      get 'index', :month=>2, :year=>2009
      assigns[:month].should == 2
      assigns[:year].should == 2009
    end
      
    it "should assign shown month" do
      get 'index', :month=>2, :year=>2009
      assigns[:shown_month].should == Date.civil(2009, 2)
    end
      
    it "should attempt to get the reservation strips" do
      # The number of nils must equal the number of days in the month here.
       <%= class_name.classify%>.expects(:reservation_strips_for_month).returns([
        [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil],
        [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil],
        [nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]
      ])
      get 'index', :month=>2, :year=>2009
      assigns[:reservation_strips].should_not be_nil
    end
      
    it "should render the index view" do
      get 'index', :month=>2, :year=>2009
      response.should render_template("index")
    end
  end
end
